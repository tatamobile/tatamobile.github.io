<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  
  <title>如何快速计算Android进程模块自身的加载基地址？ | TATAMOBILE</title>
  <meta name="author" content="TATAMOBILE">
  
  <meta name="description" content="user growth tech">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="如何快速计算Android进程模块自身的加载基地址？"/>
  <meta property="og:site_name" content="TATAMOBILE"/>

  
    <meta property="og:image" content=""/>
  

  <link rel="shortcut icon" href="/favicon.png">
  
  
<link rel="stylesheet" href="/css/style.css">

  <!--[if lt IE 9]><script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script><![endif]-->
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FXZ3M3DJK6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FXZ3M3DJK6');
</script>


  
<!-- Google Adsense -->
<!-- <script data-ad-client="ca-pub-6011041061943855" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->

  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">TATAMOBILE</a></h1>
  <h2><a href="/">安卓源码分析</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/archives">归档</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article id="post-Android-Application-Protector-Calculate-module-itself-load-base-address" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2022-02-10T14:21:12.000Z"><a href="/2022/02/10/Android-Application-Protector-Calculate-module-itself-load-base-address/">2022-02-10</a></time>
        
  
    <h1 class="p-name title" itemprop="headline name">如何快速计算Android进程模块自身的加载基地址？</h1>
  

      
    </header>
    <div class="e-content entry" itemprop="articleBody">
        
      
        <!-- Table of Contents -->
        
        <h2 id="缘起"><a href="#缘起" class="headerlink" title="缘起"></a>缘起</h2><p>在Android安全开发中，经常需要获取进程内模块的加载基地址，获取方法一般有：</p>
<ul>
<li>通过解析/proc/pid/maps文件</li>
<li>使用“dl_iterate_phdr”遍历</li>
</ul>
<p>上述这些方法比较慢，用于一些检测任务是可以的，考虑这样一个场景：开发一个安全模块，这个模块是接管了进程的入口，在入口处需要基于安全模块自身的加载基地址做一些事情，如检验、取数据等。那么快速获取基地址就变得非常有必要了。</p>
<h2 id="探索"><a href="#探索" class="headerlink" title="探索"></a>探索</h2><p>在阅读android 8.1.0_r33中的linker源码时(bionic/linker/linker_main.cpp)，发现一段非常有意思的代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> ElfW(Addr) __linker_init(<span class="keyword">void</span>* raw_args) &#123;</span><br><span class="line">  <span class="function">KernelArgumentBlock <span class="title">args</span><span class="params">(raw_args)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// AT_BASE is set to 0 in the case when linker is run by iself</span></span><br><span class="line">  <span class="comment">// so in order to link the linker it needs to calcuate AT_BASE</span></span><br><span class="line">  <span class="comment">// using information at hand. The trick below takes advantage</span></span><br><span class="line">  <span class="comment">// of the fact that the value of linktime_addr before relocations</span></span><br><span class="line">  <span class="comment">// are run is an offset and this can be used to calculate AT_BASE.</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">uintptr_t</span> linktime_addr = <span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">uintptr_t</span>&gt;(&amp;linktime_addr);</span><br><span class="line">  ElfW(Addr) linker_addr = <span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">uintptr_t</span>&gt;(&amp;linktime_addr) - linktime_addr;</span><br></pre></td></tr></table></figure>
<p>这两行神奇的代码可直接计算出linker的加载基地址，如果我们直接使用来计算自己开发的模块加载基地址，结果会是0。为什么呢？其实上面代码片段中的注释已经解释了原因，如果代码在未完成重定位之前就执行，就能计算出正确的基地址，但自己开发的模块执行这两句代码时候，已经完成了重定位，所以结果是0。<br>为了更好地理解重定位前后对计算结果的影响，需要考察这两句代码对于的汇编语言，这里假设linker加载基地址是0xea923000。</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0000</span>f6c0 &lt;__dl___linker_init&gt;:</span><br><span class="line"><span class="symbol">    f6c0:</span>	e92d <span class="number">4</span>ff0 	<span class="keyword">stmdb</span>	<span class="built_in">sp</span>!, &#123;<span class="built_in">r4</span>, <span class="built_in">r5</span>, <span class="built_in">r6</span>, <span class="built_in">r7</span>, <span class="built_in">r8</span>, <span class="built_in">r9</span>, <span class="built_in">sl</span>, <span class="built_in">fp</span>, <span class="built_in">lr</span>&#125;</span><br><span class="line"><span class="symbol">    f6c4:</span>	f5ad <span class="number">5</span>d95 	sub.w	<span class="built_in">sp</span>, <span class="built_in">sp</span>, <span class="number">#4768</span>	<span class="comment">; 0x12a0</span></span><br><span class="line"><span class="symbol">    f6c8:</span>	b081      	<span class="keyword">sub</span>	<span class="built_in">sp</span>, <span class="number">#4</span></span><br><span class="line"><span class="symbol">    f6ca:</span>	f850 <span class="number">1</span>b04 	ldr.w	<span class="built_in">r1</span>, [<span class="built_in">r0</span>], <span class="number">#4</span></span><br><span class="line"><span class="symbol">    f6ce:</span>	e9cd <span class="number">107</span>b 	<span class="keyword">strd</span>	<span class="built_in">r1</span>, <span class="built_in">r0</span>, [<span class="built_in">sp</span>, <span class="number">#492</span>]	<span class="comment">; 0x1ec</span></span><br><span class="line"><span class="symbol">    f6d2:</span>	eb00 <span class="number">0081</span> 	add.w	<span class="built_in">r0</span>, <span class="built_in">r0</span>, <span class="built_in">r1</span>, <span class="keyword">lsl</span> <span class="number">#2</span></span><br><span class="line"><span class="symbol">    f6d6:</span>	<span class="number">3004</span>      	<span class="keyword">adds</span>	<span class="built_in">r0</span>, <span class="number">#4</span></span><br><span class="line"><span class="symbol">    f6d8:</span>	<span class="number">907</span>d      	<span class="keyword">str</span>	<span class="built_in">r0</span>, [<span class="built_in">sp</span>, <span class="number">#500</span>]	<span class="comment">; 0x1f4</span></span><br><span class="line"><span class="symbol">    f6da:</span>	f850 <span class="number">1</span>b04 	ldr.w	<span class="built_in">r1</span>, [<span class="built_in">r0</span>], <span class="number">#4</span></span><br><span class="line"><span class="symbol">    f6de:</span>	<span class="number">2900</span>      	<span class="keyword">cmp</span>	<span class="built_in">r1</span>, <span class="number">#0</span></span><br><span class="line"><span class="symbol">    f6e0:</span>	d1fb      	bne.n	f6da &lt;__dl___linker_init+<span class="number">0x1a</span>&gt;</span><br><span class="line">    <span class="comment">; 0x101b4地址的值为0x07BAC2 r1=0x07BAC2</span></span><br><span class="line"><span class="symbol">    f6e2:</span>	f8df <span class="number">1</span>ad0 	ldr.w	<span class="built_in">r1</span>, [<span class="built_in">pc</span>, <span class="number">#2768</span>]	<span class="comment">; 101b4 &lt;__dl_$d.12&gt; </span></span><br><span class="line"><span class="symbol">    f6e6:</span>	<span class="number">907</span>e      	<span class="keyword">str</span>	<span class="built_in">r0</span>, [<span class="built_in">sp</span>, <span class="number">#504</span>]	<span class="comment">; 0x1f8</span></span><br><span class="line"><span class="symbol">    f6e8:</span>	<span class="number">2700</span>      	<span class="keyword">movs</span>	<span class="built_in">r7</span>, <span class="number">#0</span></span><br><span class="line">    <span class="comment">; pc=0xf6ea+0x4+0xea923000 r1 = r1 + pc = 0xEA9AE1B0</span></span><br><span class="line"><span class="symbol">    f6ea:</span>	<span class="number">4479</span>      	<span class="keyword">add</span>	<span class="built_in">r1</span>, <span class="built_in">pc</span> </span><br><span class="line">    <span class="comment">; 0xEA9AE1B0地址的值是0x8B1B0, r2 = 0x8B1B0 即linktime_addr的地址</span></span><br><span class="line"><span class="symbol">    f6ec:</span>	<span class="number">680</span>a      	<span class="keyword">ldr</span>	<span class="built_in">r2</span>, [<span class="built_in">r1</span>, <span class="number">#0</span>]</span><br><span class="line">    <span class="comment">; r4 = r1 - r2 = 0xEA9AE1B0 - 0x8B1B0 = 0xEA923000 即linker加载基地址</span></span><br><span class="line"><span class="symbol">    f6ee:</span>	<span class="number">1</span>a8c      	<span class="keyword">subs</span>	<span class="built_in">r4</span>, <span class="built_in">r1</span>, <span class="built_in">r2</span></span><br><span class="line"><span class="symbol">    f6f0:</span>	f850 <span class="number">1</span>b04 	ldr.w	<span class="built_in">r1</span>, [<span class="built_in">r0</span>], <span class="number">#4</span></span><br></pre></td></tr></table></figure>
<p>linktime_addr的偏移是0x8B1B0。在重定位之前，地址0x8B1B0的值也是0x8B1B0。</p>
<img src="/images/android_810_linker_linktimeaddr.png" class="">
<p>使用readelf工具考察linker中的重定位项：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ arm-linux-androideabi-readelf -r linker</span><br><span class="line">...</span><br><span class="line">0008b198  00000017 R_ARM_RELATIVE</span><br><span class="line">0008b1a4  00000017 R_ARM_RELATIVE</span><br><span class="line">0008b1b0  00000017 R_ARM_RELATIVE</span><br><span class="line">0008b1d8  00000017 R_ARM_RELATIVE</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>继续观察R_ARM_RELATIVE类型的重定位如何处理(6.0.1_r10/bionic/linker/linker.cpp)：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> R_GENERIC_RELATIVE:</span><br><span class="line">  count_relocation(kRelocRelative);</span><br><span class="line">  MARK(rel-&gt;r_offset);</span><br><span class="line">  TRACE_TYPE(RELO, <span class="string">&quot;RELO RELATIVE %16p &lt;- %16p\n&quot;</span>,</span><br><span class="line">             <span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">void</span>*&gt;(reloc),</span><br><span class="line">             <span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">void</span>*&gt;(load_bias + addend));</span><br><span class="line">  *<span class="keyword">reinterpret_cast</span>&lt;ElfW(Addr)*&gt;(reloc) = (load_bias + addend);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>
<p>由于0x0008b1b0在重定位表里且类型为R_ARM_RELATIVE，完成重定位之后，地址0x8B1B0的值变为0xEA9AE1B0(0x8B1B0+0xEA923000)，与0xEA9AE1B0（linktime_addr变量在内存的地址）相减为0。这就是为什么在我们编写的模块里无法使用此种方法完成加载基地址的计算。</p>
<p>难道就这样结束了？不，虽然这种方法无法被直接使用，但这种思路值得借鉴，稍加改进之后，就可以运用到自己的方案中。改进方法：想办法去掉重定位项。</p>
<h2 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h2><p>为了避免生成重定位项，可通过汇编语言实现，下面是模块文件结构：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sample</span><br><span class="line">    ├── jni</span><br><span class="line">    │   ├── Android.mk</span><br><span class="line">    │   ├── Application.mk</span><br><span class="line">    │   ├── asm.h</span><br><span class="line">    │   ├── begin.S</span><br><span class="line">    │   ├── sample.c</span><br></pre></td></tr></table></figure>

<p>文件Application.mk</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">APP_ABI :&#x3D; armeabi</span><br><span class="line">APP_PLATFORM &#x3D; android-9</span><br></pre></td></tr></table></figure>

<p>文件Android.mk</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">LOCAL_PATH :&#x3D; $(call my-dir)</span><br><span class="line"></span><br><span class="line">include $(CLEAR_VARS)</span><br><span class="line"></span><br><span class="line">LOCAL_MODULE    :&#x3D; sample</span><br><span class="line">LOCAL_SRC_FILES :&#x3D; begin.S sample.c</span><br><span class="line">LOCAL_LDLIBS +&#x3D; -llog</span><br><span class="line">include $(BUILD_SHARED_LIBRARY)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>文件asm.h</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SAMPLE_ASM_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SAMPLE_ASM_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __asm_custom_entry(f)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __asm_custom_end(f)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __asm_function_type %function</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __asm_align 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ENTRY(f) \</span></span><br><span class="line">    .text; \</span><br><span class="line">    .globl f; \</span><br><span class="line">    .align __asm_align; \</span><br><span class="line">    .type f, __asm_function_type; \</span><br><span class="line">    f: \</span><br><span class="line">    __asm_custom_entry(f); \</span><br><span class="line">    .cfi_startproc;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> END(f) \</span></span><br><span class="line">    .cfi_endproc; \</span><br><span class="line">    .size f, .-f; \</span><br><span class="line">    __asm_custom_end(f)</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<p>文件begin.S</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &quot;asm.h&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">.type</span> _linktime_addr,%object</span><br><span class="line">    <span class="meta">.global</span> _linktime_addr</span><br><span class="line">    .p2align <span class="number">2</span></span><br><span class="line"><span class="symbol">_linktime_addr:</span></span><br><span class="line">    <span class="meta">.long</span> <span class="number">0xf8c</span></span><br><span class="line">    .size _linktime_addr, <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">ENTRY</span>(_init)</span><br><span class="line">    <span class="keyword">push</span> &#123;<span class="built_in">r0</span>-<span class="built_in">r7</span>, <span class="built_in">lr</span>&#125;</span><br><span class="line">    <span class="keyword">sub</span> <span class="built_in">sp</span>,<span class="number">#12</span></span><br><span class="line">    <span class="keyword">adr</span> <span class="built_in">r0</span>, _linktime_addr</span><br><span class="line">    <span class="keyword">ldr</span> <span class="built_in">r1</span>, [<span class="built_in">r0</span>]</span><br><span class="line">    <span class="keyword">sub</span> <span class="built_in">r0</span>,<span class="built_in">r1</span></span><br><span class="line">    <span class="keyword">bl</span> sample_init</span><br><span class="line">    <span class="keyword">add</span> <span class="built_in">sp</span>,<span class="number">#12</span></span><br><span class="line">    <span class="keyword">pop</span> &#123;<span class="built_in">r0</span>-<span class="built_in">r7</span>, <span class="built_in">pc</span>&#125;</span><br><span class="line"><span class="symbol">END</span>(_init)</span><br></pre></td></tr></table></figure>

<p>文件sample.c</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;android/log.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdint.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">sample_init</span><span class="params">(<span class="keyword">uint32_t</span> base)</span></span>&#123;</span><br><span class="line">    __android_log_print(ANDROID_LOG_INFO, <span class="string">&quot;sample&quot;</span>, <span class="string">&quot;base:0x%08x&quot;</span>, base);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>反汇编构建出来的libsample.so中的_init函数：</p>
<img src="/images/ida_libsample_self_base.png" class="">

<p>你可能已经注意到linktime_addr的初始值被设为0xf8c，这里只是方便演示，在笔者本机编译发现linktime_addr的地址是0xf8c。在实际运用中，你应该编写一个独立的脚本专门patch模块中linktime_addr的值，比如通过解析ELF文件，获得linktime_addr在文件的位置，并在此位置写入对应的值即可。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>本文通过研究linker中计算模块基地址的方法，找到了一种可快速计算模块自身的加载基地址。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="http://androidxref.com/8.1.0_r33">Android 8.1.0_r33</a></li>
<li><a target="_blank" rel="noopener" href="http://androidxref.com/6.0.1_r10">Android 6.0.1_r10</a></li>
</ul>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/Reverse-Engineering/">Reverse Engineering</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/android/">android</a>, <a href="/tags/arm/">arm</a>
  </div>

        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>

  
      
<div id="gitalk-container"></div>   
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '15e82eced18a4f3699f5',
        clientSecret: '9159132c67a2722bbee0d59ff3026bb361bcd81c',
        repo: 'tatamobile_commnets',
        owner: 'vforkliu',
        admin: ["vforkliu"],
        id: '2022-02-10 22:21:12',
        title: '如何快速计算Android进程模块自身的加载基地址？',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });
    gitalk.render('gitalk-container');
</script>
      
  
</section>



  <nav id="postnav">
    
    
      <p>上一篇 : <a href="/2022/02/23/ELF-File-Format-Under-the-Hood/" >重学ELF文件格式</a></p>
    
   
    
      <p>下一篇 : <a href="/2022/02/09/Android-Process-Memory-Layout-What-s-the-Stack-Top-of-Main-Thread/" >Android进程内存布局：主线程的栈顶是多少？</a></p>
    
    
    <div class="clearfix"></div>
  </nav>
</div></div>
    <aside id="sidebar" class="alignright">
        
    <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="as_sitesearch" value="tatamobile.net">
  </form>
</div>


    
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/CMake/">CMake</a><small>1</small></li>
  
    <li><a href="/categories/Python/">Python</a><small>2</small></li>
  
    <li><a href="/categories/Qt/">Qt</a><small>1</small></li>
  
    <li><a href="/categories/Reverse-Engineering/">Reverse Engineering</a><small>5</small></li>
  
  </ul>
</div>


    
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/C/">C++</a><small>1</small></li>
  
    <li><a href="/tags/CMake/">CMake</a><small>1</small></li>
  
    <li><a href="/tags/Decorator/">Decorator</a><small>1</small></li>
  
    <li><a href="/tags/Metaclass/">Metaclass</a><small>1</small></li>
  
    <li><a href="/tags/Python/">Python</a><small>2</small></li>
  
    <li><a href="/tags/Qt/">Qt</a><small>1</small></li>
  
    <li><a href="/tags/android/">android</a><small>3</small></li>
  
    <li><a href="/tags/arm/">arm</a><small>4</small></li>
  
    <li><a href="/tags/elf/">elf</a><small>1</small></li>
  
    <li><a href="/tags/java/">java</a><small>1</small></li>
  
    <li><a href="/tags/jni/">jni</a><small>1</small></li>
  
    <li><a href="/tags/markdown/">markdown</a><small>1</small></li>
  
    <li><a href="/tags/unicorn/">unicorn</a><small>1</small></li>
  
  </ul>
</div>


        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6011041061943855" crossorigin="anonymous"></script>
        <!-- 侧边栏广告 -->
        <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-6011041061943855"
            data-ad-slot="2644505017"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2024 TATAMOBILE|<a href="http://beian.miit.gov.cn/"; target=_blank>粤ICP备2020090023号</a>|<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44030902002346">粤公网安备 44030902002346号</a>
  
</div>
<div class="clearfix"></div></footer>
  
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/jquery.imagesloaded.min.js"></script>


<script src="/js/gallery.js"></script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script>
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
